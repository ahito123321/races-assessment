<template>
    <div class="main-div-container">
        <div class="a-container">
            <lightning-layout>
                <lightning-layout-item vertical-align="stretch">
                    <lightning-avatar class="registration-wizzard" src="https://artembubnov-dev-ed--c.visualforce.com/resource/1558515787000/RegistrationWizzard" size="large" alternative-text="regestration-wizzard-img"></lightning-avatar>
                </lightning-layout-item>

                <lightning-layout-item>
                    <p class="registretion-wizard-tittle">Registration wizard</p>
                </lightning-layout-item>
            </lightning-layout> 
            <h1 class="user-nick" id="customer-name">{prefilledNickName}</h1>      
        </div>

        <div>
            <lightning-layout horizontal-align="spread">
                <lightning-layout-item padding="around-small">
                    <div class="slds-text-body_regular">Registration details</div>
                </lightning-layout-item>

                <lightning-layout-item class="buttons-style">
                    <lightning-button variant="brand" label="Save" title="Save" class="slds-m-left_x-small"></lightning-button>
                    <lightning-button variant="destructive" label="Cancel" title="Cancel"  class="slds-m-left_x-small"></lightning-button>
                </lightning-layout-item>
            </lightning-layout>
        </div>

        <div>
            <p class="registration-information">Registration information</p>
        </div>

        <div class="c-container">
            <lightning-layout horizontal-align="spread">
                <lightning-layout-item padding="around-small">
                    <div class="custom-box"><abbr title="required" class="slds-required">*</abbr>Registration Name</div>
                    <div class="custom-box"><abbr title="required" class="slds-required">*</abbr>Contact</div>
                    <div class="custom-box"><abbr title="required" class="slds-required">*</abbr>Arrival Date</div>
                </lightning-layout-item>

                <lightning-layout-item padding="around-small">
                    
                    <lightning-input    name="inpunRegName" 
                                        label="Registration Name" 
                                        value={prefilledNickName}
                                        onfocus={inputCleaner}
                                        onblur={nickNameValidator}
                                        ></lightning-input>
                                   
                                        <!-- <template if:true={popUpsController.listOfNickNamesPOP}>
                                            <template if:true={grabNickNames.data}>
                                                <lightning-card>
                                                    <template for:each={grabNickNames.data} for:item="Registration">
                                                        <p key={Registration.Id} class="pSearcher" onclick={nickNamePutter}>
                                                            {Registration.Name}
                                                        </p>
                                                    </template>
                                                </lightning-card>
                                            </template>
                                        </template> -->
                        
                    <lightning-input    class="slds-m-bottom_small" 
                                        data-name="PopUpContactSelector" 
                                        value = {prefilledContact}
                                        onfocus = {inputCleaner}
                                        onchange = {contactFinder}
                                        ></lightning-input>
                                    <!-- onclick = {openModals}
                                    onchange = {contactFinder}
                                    onmouseover = {closeModals}
                                    > </lightning-input>  -->
                        
<!-- ================================================================================================================================================-->
                                   <template if:true={popUpsController.PopUpContactSelector}>
                                       <template if:true={grabContacts.data}>
                                        <lightning-card>
                                            <template for:each={grabContacts.data} for:item="contact">
                                                <p key={contact.Id} class="pSearcher" onclick={contactValidator}>
                                                    {contact.Name}                                                   

                                                </p>
                                            </template>
                                        </lightning-card>
                                    </template>
                                </template>

                                <template if:true={popUpsController.wrongContact}>
                                    <p>There is no Registration with such Contact</p>
                                    <lightning-button variant="brand" label="Ok" title="Ok" class="slds-m-left_x-small" onclick={closeModals} data-name="wrongContact"></lightning-button> 
                                </template>
<!-- ============================================================================================================================================================-->
                    <lightning-input type="date" name="inputArrivDate" label="Arrival Date" value={prefilledArrivalDate}></lightning-input>
                </lightning-layout-item>

               

                <lightning-layout-item padding="around-small">
                    <div class="custom-box"><abbr title="required" class="slds-required">*</abbr>Number of Mathes Paid For</div>
                    <div class="custom-box">Number Of Matches Scheduled</div>
                    <div class="custom-box">Number of Matches Remaining</div>
                </lightning-layout-item>

                <lightning-layout-item padding="around-small">
                    <lightning-input    name="iputNumMatchPaidFor" 
                                        label="Number of Mathes Paid For" 
                                        value={prefilledNumberOfMatchesPaidFor} 
                                        type="number"
                                        min="1"
                                        max="14">
                    </lightning-input>
                    <lightning-input readonly label="Number Of Matches Scheduled" name="numMatchSched" value={prefilledNumberOfMatchesScheduled}></lightning-input>
                    <lightning-input readonly label="Number of Matches Remaining" name="numMatchRem" value={prefilledNumberOfMatchesRemaining}></lightning-input>
                </lightning-layout-item>
            
            </lightning-layout>
        </div>
    </div>
    <template if:true={popUpsController.openErrorMessWrongContactName}>
        <p class="errorMessWrongContactNameStyle">
            This contact already has a registration
        </p>
    </template>
    <template if:true={popUpsController.openErrorMessWrongNickName}>
        <p class="errorMessWrongNickNameStyle">
            NickName is already exist
        </p>
    </template>
</template>
<!-- ============================================================================================================================== -->
    <!-- <template if:true={popUpsController.bShowModal}>
        <div class="main-div-container">
            <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                <div class="slds-modal__container">
                    <header class="slds-modal__header">
                        <lightning-button-icon  size="large"
                                                icon-name="utility:close" 
                                                variant="bare-inverse"
                                                class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                                title="Close"
                                                onclick={closeModals}
                                                data-name="bShowModal"></lightning-button-icon>
                           
                    <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Form to create a new registration</h2>
                    </header>
                       <div class="c-containerB">
                            <lightning-layout horizontal-align="spread">
                                <lightning-layout-item padding="around-small">
                                    <div class="custom-box"><abbr title="required" class="slds-required">*</abbr>Registration Name</div>
                                    <div class="custom-box"><abbr title="required" class="slds-required">*</abbr>Contact</div>
                                </lightning-layout-item>
                
                               <lightning-layout-item padding="around-small">
                                    <lightning-input  data-fields-name="name" 
                                                    onmouseout = {nickNameValidation}
                                                    onchange={handleInputs}
                                                     
                                                        ></lightning-input>

                                    <template if:true={popUpsController.nickNameduplication}>
                                            <p>NickName is already exist</p>
                                            <lightning-button variant="brand" label="Ok" title="Ok" class="slds-m-left_x-small" onclick={closeModals} data-name="nickNameduplication"></lightning-button> 
                                    </template>


                                    <lightning-input    class="slds-m-bottom_small" data-name="contactSearchPop"
                                                        value = {chosenContact}
                                                        onclick = {openModals}
                                                        onchange = {contactFinder}
                                                        onmouseover = {closeModals}
                                                        > </lightning-input>

                                    <template if:true={popUpsController.contactSearchPop}>
                                            <template if:true={grabContacts.data}>
                                             <lightning-card>
                                                 <template for:each={grabContacts.data} for:item="contact">
                                                     <p key={contact.Id} class="pSearcher" onclick={cotactPuterB}>
                                                         {contact.Name}                                                   
     
                                                     </p>
                                                 </template>
                                             </lightning-card>
                                         </template>
                                     </template>

                                </lightning-layout-item>
                
                               <lightning-layout-item padding="around-small">
                                    <div class="custom-box"><abbr title="required" class="slds-required">*</abbr>Arrival Date</div>
                                    <div class="custom-box"><abbr title="required" class="slds-required">*</abbr>Number of Mathes Paid For</div>
                                </lightning-layout-item>
                
                                <lightning-layout-item padding="around-small">
                                    <lightning-input type="date" 
                                                     name="inputArrivDate" 
                                                     label="Arrival Date" 
                                                     onchange={handleInputs}
                                                     data-fields-name="date"
                                                     value={test.date}
                                                     ></lightning-input>
                                                     
                                    <lightning-input    name="iputNumMatchPaidFor" 
                                                        label="Number of Mathes Paid For" 
                                                        onchange={numberOfMatchesPaidValidator}
                                                       
                                                        ></lightning-input>
                                        <template if:true={popUpsController.paidMistakeToMuchMatchesPOP}>
                                            <p>One player can not participate in more than 14 matches</p>
                                            <lightning-button variant="brand" label="Ok" title="Ok" class="slds-m-left_x-small" onclick={closeModals} data-name="paidMistakeToMuchMatchesPOP"></lightning-button> 
                                        </template>

                                        <template if:true={popUpsController.paidMistakeNotEnoughMatchesPOP}>
                                            <p>The player must participate at least in one match</p>
                                            <lightning-button variant="brand" label="Ok" title="Ok" class="slds-m-left_x-small" onclick={closeModals} data-name="paidMistakeNotEnoughMatchesPOP"></lightning-button> 
                                        </template>
                                
                                </lightning-layout-item>
                            
                            </lightning-layout>
                        </div>
                       
                       <footer class="slds-modal__footer">
                            
                            <lightning-button variant="brand" label="Save" title="Save" class="slds-m-left_x-small" onclick={saveTheNewRegistration}></lightning-button>
                            <lightning-button variant="destructive" label="Cancel" title="Cancel"  class="slds-m-left_x-small" onclick={closeModals} data-name="bShowModal"></lightning-button>
                       </footer>
                    </div>
            </section>
        <div class="slds-backdrop slds-backdrop_open">543</div>
        </div>
    </template> -->


<!-- <lightning-layout-item>
                        <div class="slds-p-around_medium lgc-bg">
                                <lightning-button-menu alternative-text="Show menu">
                                    <lightning-menu-item onclick={openModals} data-name="bShowModal" value="Create new Registration" label="Create new Registration"></lightning-menu-item>
                                </lightning-button-menu>
                            </div>
                </lightning-layout-item> -->